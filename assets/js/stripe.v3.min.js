!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function R(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function I(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function N(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function U(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function B(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function G(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var ee,te,ne,re,oe,ie=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return window.__stripeElementsController&&window.__stripeElementsController.reportIntegrationError(e),n.name="IntegrationError",n}return i(t,e),t}(Error),ae=ie,se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.path||[],o=n.label||"option",i=e.check(t,n),a=null===t?"null":void 0===t?"undefined":se(t);if(void 0===i)throw new ae("Invalid "+o+": "+r.join(".")+" should be "+e.description+".\n      You passed a value of type: "+a+".");return i},ue=ce,le=function(e){return/^http(s)?:\/\//.test(e)},pe=function(e){if(!le(e))return null;var t=document.createElement("a");t.href=e;var n=t.protocol,r=t.host,o=/:80$/,i=/:443$/;return"http:"===n&&o.test(r)?r=r.replace(o,""):"https:"===n&&i.test(r)&&(r=r.replace(i,"")),{host:r,protocol:n,origin:n+"//"+r}},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=pe(e);return!!n&&n.host!==(t||window.location.host)},de={TOKENIZE:"TOKENIZE",FETCH_LOCALE:"FETCH_LOCALE",UPDATE_CSS_FONTS:"UPDATE_CSS_FONTS",CREATE_SOURCE:"CREATE_SOURCE",AUTHORIZE_SOURCE:"AUTHORIZE_SOURCE",GET_AUTHORIZATION_STATUS:"GET_AUTHORIZATION_STATUS",RETRIEVE_SOURCE:"RETRIEVE_SOURCE",CREATE_APPLE_PAY_SESSION:"CREATE_APPLE_PAY_SESSION"},he=de,ye={CARD_ELEMENT:"CARD_ELEMENT",CONTROLLER:"CONTROLLER",METRICS_CONTROLLER:"METRICS_CONTROLLER",PAYMENT_REQUEST_ELEMENT:"PAYMENT_REQUEST_ELEMENT",PAYMENT_REQUEST:"PAYMENT_REQUEST"},me=ye,_e=function(e){return"https://js.stripe.com/v3/"+(e||"")},ve=(ee={},a(ee,me.CARD_ELEMENT,_e("elements-inner-card-2888fbd8ef448e17d044896440586367.html")),a(ee,me.CONTROLLER,_e("controller-88209dc84c396ac3a76819f01fa51e2b.html")),a(ee,me.METRICS_CONTROLLER,"https://js.stripe.com/v2/m/outer.html"),a(ee,me.PAYMENT_REQUEST_ELEMENT,_e("elements-inner-payment-request-d347ce03189756ca9e4be90018936767.html")),a(ee,me.PAYMENT_REQUEST,_e("payment-request-inner-123703384f5e11d3e9ce2f1fc8b5c8df.html")),ee),be=ve,ge=pe("https://js.stripe.com/v3/"),we=ge?ge.origin:"",Ee=document.referrer,Oe=pe(Ee),ke=(Oe&&Oe.origin,parseInt(10,10),{family:"font-family",src:"src",unicodeRange:"unicode-range",style:"font-style",variant:"font-variant",stretch:"font-stretch",weight:"font-weight"}),Se=Object.keys(ke).reduce(function(e,t){return e[ke[t]]=t,e},{}),Pe=0,Ce=function(e){return""+e+Pe++},Ae=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?(parseInt(t,10)^16*Math.random()>>parseInt(t,10)/4).toString(16):"00000000-0000-4000-8000-000000000000".replace(/[08]/g,e)},Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je=function e(t,n){var r=[];return Object.keys(t).forEach(function(o){var i=t[o],a=n?n+"["+o+"]":o;if(i&&"object"===(void 0===i?"undefined":Te(i))){var c=e(i,a);""!==c&&(r=[].concat(s(r),[c]))}else void 0!==i&&null!==i&&(r=[].concat(s(r),[a+"="+encodeURIComponent(String(i))]))}),r.join("&").replace(/%20/g,"+")},Re=je,Ie=n(2),Me=n.n(Ie),qe=window.Promise||Me.a,Ne=qe,Le=n(6),xe=n.n(Le),Fe=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ue=function(e,t){var n={};t.forEach(function(e){var t=Fe(e,2),r=t[0],o=t[1];r.split(/\s+/).forEach(function(e){e&&(n[e]=n[e]||o)})}),e.className=xe()(e.className,n)},De=function(e,t){e.style.cssText=Object.keys(t).map(function(e){return e+": "+t[e]+" !important;"}).join(" ")},He=function(e){try{return window.parent.frames[e]}catch(e){return null}},ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be=function(e){var t=e.frameId,n=e.controllerId,r=e.type,o=we,i=void 0;"controller"===r?i=He(t):"group"===r?i=He(n):"outer"===r?i=window.frames[t]:"inner"===r&&(o="*",i=window.parent),i&&i.postMessage(JSON.stringify(ze({},e,{__stripeJsV3:!0})),o)},Ke=function(e){try{var t="string"==typeof e?JSON.parse(e):e;return t.__stripeJsV3?t:null}catch(e){return null}},Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ye=function(){function e(){c(this,e),this._callbacks={},this.on=this.addListener=this.addEventListener,this.off=this.removeListener=this.removeEventListener}return Ve(e,[{key:"addEventListener",value:function(e,t){return this._addEventListener(e,t)}},{key:"_addEventListener",value:function(e,t,n){return this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push({original:n,fn:t}),this}},{key:"removeEventListener",value:function(e,t){if(void 0===t)delete this._callbacks[e];else for(var n=this._callbacks[e],r=void 0,o=0;o<n.length;o++)if(r=n[o],r.fn===t||r.original===t){n.splice(o,1);break}return this}},{key:"removeAllListeners",value:function(){return this._callbacks={},this}},{key:"hasRegisteredListener",value:function(e){return this._callbacks[e]&&this._callbacks[e].length>0}},{key:"once",value:function(e,t){var n=this,r=function r(){n.off(e,r),t.apply(void 0,arguments)};return this._addEventListener(e,r,t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return(this._callbacks[e]||[]).forEach(function(e){return e.fn.apply(void 0,n)}),this}}]),e}(),Ge=Ye,Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ze=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Qe=function(e){function t(e,n,r){l(this,t);var o=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.type=e,o.loaded=!1,o._controllerId=n,o._queuedMessages=[],o._requests={},o.id=o._generateId(),o._iframe=o._createIFrame(r),o.on("load",function(){o.loaded=!0,o._ensureMounted(),o.loaded&&(o._queuedMessages.forEach(function(e){return o._send(e)}),o._queuedMessages=[])}),o}return f(t,e),Ze(t,[{key:"_generateId",value:function(){return Ce("__privateStripeFrame")}},{key:"send",value:function(e){this._send({message:e,type:"outer",frameId:this.id,controllerId:this._controllerId})}},{key:"action",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ce(e),o=new Ne(function(o,i){t._requests[r]=Je({},t._requests[r],{resolve:o,reject:i}),t._send({message:{action:"stripe-frame-action",payload:{type:e,nonce:r,options:n}},type:"outer",frameId:t.id,controllerId:t._controllerId})});return this._requests[r]=Je({},this._requests[r],{promise:o}),o}},{key:"resolve",value:function(e,t){this._requests[e]&&this._requests[e].resolve(t)}},{key:"_send",value:function(e){this._ensureMounted(),this.loaded?Be(e):this._queuedMessages=[].concat(u(this._queuedMessages),[e])}},{key:"appendTo",value:function(e){e.appendChild(this._iframe)}},{key:"unmount",value:function(){this.loaded=!1,this.emit("unload")}},{key:"_ensureMounted",value:function(){this._isMounted()||this.unmount()}},{key:"_isMounted",value:function(){return!!document.body&&document.body.contains(this._iframe)}},{key:"_createIFrame",value:function(e){var t=pe(window.location.toString()),n=t?t.origin:"",r=e.queryString&&"string"==typeof e.queryString?e.queryString:Re(Je({},e,{origin:n,controllerId:this._controllerId})),o=document.createElement("iframe");return o.setAttribute("frameborder","0"),o.setAttribute("allowTransparency","true"),o.setAttribute("scrolling","no"),o.setAttribute("name",this.id),o.setAttribute("allowpaymentrequest","true"),o.src=be[this.type]+"#"+r,o}}]),t}(Ge),We=Qe,$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xe=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},et={border:"none",margin:"0",padding:"0",width:"1px","min-width":"100%",overflow:"hidden",display:"block",visibility:"hidden",position:"fixed",height:"1px","pointer-events":"none"},tt=function(e){function t(e,n,r){d(this,t);var o=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return o.autoload=r.autoload||!1,"complete"===document.readyState?o._ensureMounted():(document.addEventListener("DOMContentLoaded",o._ensureMounted.bind(o)),window.addEventListener("load",o._ensureMounted.bind(o))),o}return y(t,e),$e(t,[{key:"_ensureMounted",value:function(){Xe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_ensureMounted",this).call(this),this._isMounted()||this._autoMount()}},{key:"_autoMount",value:function(){if(document.body)this.appendTo(document.body);else if("complete"===document.readyState||"interactive"===document.readyState)throw new ae("Stripe.js requires that your page has a <body> element.");this.autoload&&(this.loaded=!0)}},{key:"_createIFrame",value:function(e){var n=Xe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createIFrame",this).call(this,e);return n.setAttribute("aria-hidden","true"),n.setAttribute("allowpaymentrequest","true"),n.setAttribute("tabIndex","-1"),De(n,et),n}}]),t}(We),nt=tt,rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ot=function(e){function t(){return m(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),rt(t,[{key:"_generateId",value:function(){return this._controllerId}}]),t}(nt),it=ot,at=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),st=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},ct={border:"none",margin:"0",padding:"0",width:"1px","min-width":"100%",overflow:"hidden",display:"block"},ut=function(e){function t(){return b(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),at(t,[{key:"update",value:function(e){this.send({action:"stripe-user-update",payload:e})}},{key:"updateStyle",value:function(e){var t=this;Object.keys(e).forEach(function(n){t._iframe.style[n]=e[n]})}},{key:"focus",value:function(){this.loaded&&this.send({action:"stripe-user-focus",payload:{}})}},{key:"blur",value:function(){this.loaded&&(this._iframe.contentWindow.blur(),this._iframe.blur())}},{key:"clear",value:function(){this.send({action:"stripe-user-clear",payload:{}})}},{key:"_createIFrame",value:function(e){var n=st(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_createIFrame",this).call(this,e);return n.setAttribute("title","Secure payment input frame"),De(n,ct),n}}]),t}(We),lt=ut,pt=function(e){var t=pe(e),n=t?t.host:"";return"stripe.com"===n||!!n.match(/\.stripe\.(com|me)$/)},ft=function(e,t){var n=pe(e),r=pe(t);return!(!n||!r)&&n.origin===r.origin},dt=function(e){return/(MSIE ([0-9]{1,}[.0-9]{0,})|Trident\/)/i.test(e)},ht=function(e){return/iPad|iPhone/i.test(e)&&!dt(e)},yt=function(e){return/Android/.test(e)&&!dt(e)},mt=window.navigator.userAgent,_t=function(e){return/Edge\//i.test(e)}(mt),vt=(dt(mt),function(e){/MSIE 9/i.test(e)}(mt),function(e){/MSIE ([0-9]{1,}[.0-9]{0,})/i.test(e)}(mt),ht(mt)),bt=(function(e){ht(e)||yt(e)}(mt),yt(mt),function(e){/^((?!chrome|android).)*safari/i.test(e)}(mt),function(e){/Firefox\//i.test(e)}(mt),window.ApplePaySession,{card:"card",cardNumber:"cardNumber",cardExpiry:"cardExpiry",cardCvc:"cardCvc",postalCode:"postalCode",iban:"iban",ideal:"ideal",paymentRequestButton:"paymentRequestButton"}),gt=bt,wt=(te={},E(te,gt.card,{unique:!0,conflict:[gt.cardNumber,gt.cardExpiry,gt.cardCvc,gt.postalCode]}),E(te,gt.cardNumber,{unique:!0,conflict:[gt.card]}),E(te,gt.cardExpiry,{unique:!0,conflict:[gt.card]}),E(te,gt.cardCvc,{unique:!0,conflict:[gt.card]}),E(te,gt.postalCode,{unique:!0,conflict:[gt.card]}),E(te,gt.paymentRequestButton,{unique:!0,conflict:[],beta:!0}),te),Et=wt,Ot=(ne={},O(ne,gt.card,me.CARD_ELEMENT),O(ne,gt.cardNumber,me.CARD_ELEMENT),O(ne,gt.cardExpiry,me.CARD_ELEMENT),O(ne,gt.cardCvc,me.CARD_ELEMENT),O(ne,gt.postalCode,me.CARD_ELEMENT),O(ne,"paymentRequestButton",me.PAYMENT_REQUEST_ELEMENT),ne),kt=Ot,St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ct="__privateStripeController",At=!1,Tt=function(){function e(t){var n=this;S(this,e),this._setupFrame=function(e,t){return n._frames[e.id]=e,n._controllerFrame.send({action:"stripe-user-createframe",payload:{newFrameId:e.id,groupId:t}}),e.on("unload",function(){n._controllerFrame.send({action:"stripe-frame-unload",payload:{unloadedFrameId:e.id}})}),e.on("load",function(){n._controllerFrame.send({action:"stripe-frame-load",payload:{loadedFrameId:e.id}}),n._controllerFrame.loaded&&e.send({action:"stripe-controller-load",payload:{}})}),e};var r=t.apiKey,o=t.stripeAccount,i=t.stripeJsId,a=t.features;this._id=Ce(Ct),this._stripeJsId=i,this._apiKey=r,this._stripeAccount=o,this._features=a||{},this._controllerFrame=new it(me.CONTROLLER,this._id,t),this._frames={},this._requests={},this._setupPostMessage()}return Pt(e,[{key:"action",value:function(e,t){var n=this,r=Ce(he[e]),o=new Ne(function(o,i){n._requests[r]=St({},n._requests[r],{resolve:o,reject:i}),n._controllerFrame.send({action:"stripe-user-action",payload:{type:e,nonce:r,options:t}})});return this._requests[r]=St({},this._requests[r],{promise:o}),o}},{key:"createElementFrame",value:function(e,t){var n=t.groupId,r=k(t,["groupId"]),o=new lt(e,this._id,St({},r,{features:this._features}));return this._setupFrame(o,n)}},{key:"createHiddenFrame",value:function(e,t){var n=new nt(e,this._id,St({},t,{features:this._features}));return this._setupFrame(n)}},{key:"report",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._controllerFrame.send({action:"stripe-controller-report",payload:{event:e,data:t}})}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this._controllerFrame.send({action:"stripe-controller-warn",payload:{args:t}})}},{key:"_setupPostMessage",value:function(){var e=this;window.addEventListener("message",function(t){var n=t.data,r=t.origin,o=Ke(n);o&&ft(we,r)&&e._handleMessage(o)})}},{key:"_handleMessage",value:function(e){var t=this,n=e.controllerId,r=e.frameId,o=e.message,i=this._frames[r];if(n===this._id)switch(o.action){case"stripe-frame-event":var a=o.payload,s=a.event,c=a.data;if(i)if(vt)if("focus"===s&&!At&&document.activeElement!==i._iframe&&i._iframe.parentElement&&document.activeElement!==i._iframe.parentElement.querySelector("__PrivateStripeElement-input")){var u=i._iframe.parentElement.querySelector("__PrivateStripeElement-input");u&&u.focus(),At=!0}else"blur"===s&&At?At=!1:i.emit(s,c);else i.emit(s,c);break;case"stripe-frame-action-complete":i&&i.resolve(o.payload.nonce,o.payload.result);break;case"stripe-frame-error":throw new ae(o.payload.message);case"stripe-integration-error":i&&i.emit("__privateIntegrationError",{message:o.payload.message});break;case"stripe-controller-load":this._controllerFrame.emit("load"),Object.keys(this._frames).forEach(function(e){return t._frames[e].send({action:"stripe-controller-load",payload:{}})});break;case"stripe-user-action-complete":this._requests[o.payload.nonce]&&this._requests[o.payload.nonce].resolve(o.payload.result);break;case"stripe-user-action-error":this._requests[o.payload.nonce]&&this._requests[o.payload.nonce].reject(new ae(o.payload.error))}}}]),e}(),jt=Tt,Rt=function(e){function t(){P(this,t);var e=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="NetworkError",e}return A(t,e),t}(Error),It=Rt,Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qt={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},Nt=function(e){return Object.keys(qt).forEach(function(t){e.setRequestHeader(t,qt[t])}),e},Lt=function e(t){return new Ne(function(n,r){var o=t.method,i=t.url,a=t.timeout,s=t.data,c=t.withCredentials,u=s?Re(s):"",l=!window.XMLHttpRequest||fe(i)&&void 0===(new XMLHttpRequest).withCredentials,p="GET"===o&&u?i+"?"+u:i,f="GET"===o?"":u;if(l){var d=new window.XDomainRequest;try{d.open(o,p)}catch(e){r(e)}d.onerror=function(){n({responseText:JSON.stringify({error:{type:"api_error"}})})},d.onload=function(){n({status:200,responseText:d.responseText})},setTimeout(function(){d.send(f)},0)}else{var h=new XMLHttpRequest,y=void 0;a&&(y=setTimeout(function(){return h.abort()},a)),c&&(h.withCredentials=c),h.open(o,p,!0),Nt(h),h.onreadystatechange=function(){4===h.readyState&&(clearTimeout(y),h.onreadystatechange=function(){},0===h.status?c?r(new It):e(Mt({},t,{withCredentials:!0})).then(n,r):n(h))};try{h.send(f)}catch(e){r(e)}}})},xt=Lt,Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut=function(e,t){var n=/@font-face[ ]?{[^}]*}/g,r=e.match(n);if(!r)throw new ae("No @font-face rules found in file from "+t);return r},Dt=function(e){var t=e.match(/@font-face[ ]?{([^}]*)}/);return t?t[1]:""},Ht=function(e,t){var n=e.replace(/\/\*.*\*\//g,"").match(/((([^;(]*\([^()]*\)[^;)]*)|[^;]+)+)(?=;)/g);if(!n)throw new ae("Found @font-face rule containing no valid font-properties in file from "+t+": "+e);return n},zt=function(e,t){var n=e.indexOf(":");if(-1===n)throw new ae("Invalid css declaration in file from "+t+': "'+e+'"');var r=e.slice(0,n).trim(),o=Se[r];if(!o)throw new ae("Unsupported css property in file from "+t+': "'+r+'"');return{property:o,value:e.slice(n+1).trim()}},Bt=function(e,t){var n=e.reduce(function(e,n){var r=zt(n,t),o=r.property,i=r.value;return Ft({},e,T({},o,i))},{});return["family","src"].forEach(function(e){if(!n[e])throw new ae("Missing css property in file from "+t+': "'+ke[e]+'"')}),n},Kt=function(e){return xt({url:e,method:"GET"}).then(function(e){return e.responseText}).then(function(t){return Ut(t,e).map(function(t){var n=Dt(t),r=Ht(n,e);return Bt(r,e)})})},Vt=Kt,Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]},Zt=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},Qt=function(e,t){for(var n={},r=Object.keys(e),o=0;o<r.length;o++)n[r[o]]=t(e[r[o]],r[o]);return n},Wt=function(e,t){for(var n={},r=Object.keys(e),o=0;o<r.length;o++)t(r[o],e[r[o]])&&(n[r[o]]=e[r[o]]);return n},$t=function(e){return e&&"object"===(void 0===e?"undefined":Gt(e))&&(e.constructor===Array||e.constructor===Object)},Xt=function(e){return $t(e)?Array.isArray(e)?e.slice(0,e.length):Yt({},e):e},en=function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=Array.isArray(n[0])?[]:{};return n.forEach(function(t){t&&Object.keys(t).forEach(function(n){var r=o[n],i=t[n],a=$t(r);"object"===(void 0===i?"undefined":Gt(i))&&a?o[n]=e(r,Xt(i)):void 0!==i?o[n]=$t(i)?e(i):Xt(i):void 0!==r&&(o[n]=r)})}),o},tn=function(e,t){for(var n={},r=0;r<t.length;r++)n[t[r]]=!0;for(var o=[],i=0;i<e.length;i++)n[e[i]]&&o.push(e[i]);return o},nn=["aed","afn","all","amd","ang","aoa","ars","aud","awg","azn","bam","bbd","bdt","bgn","bhd","bif","bmd","bnd","bob","brl","bsd","btn","bwp","byr","bzd","cad","cdf","chf","clf","clp","cny","cop","crc","cuc","cup","cve","czk","djf","dkk","dop","dzd","egp","ern","etb","eur","fjd","fkp","gbp","gel","ghs","gip","gmd","gnf","gtq","gyd","hkd","hnl","hrk","htg","huf","idr","ils","inr","iqd","irr","isk","jmd","jod","jpy","kes","kgs","khr","kmf","kpw","krw","kwd","kyd","kzt","lak","lbp","lkr","lrd","lsl","ltl","lvl","lyd","mad","mdl","mga","mkd","mmk","mnt","mop","mro","mur","mvr","mwk","mxn","myr","mzn","nad","ngn","nio","nok","npr","nzd","omr","pab","pen","pgk","php","pkr","pln","pyg","qar","ron","rsd","rub","rwf","sar","sbd","scr","sdg","sek","sgd","shp","skk","sll","sos","srd","ssp","std","svc","syp","szl","thb","tjs","tmt","tnd","top","try","ttd","twd","tzs","uah","ugx","usd","uyu","uzs","vef","vnd","vuv","wst","xaf","xag","xau","xcd","xdr","xof","xpf","yer","zar","zmk","zmw","btc","jep","eek","ghc","mtl","tmm","yen","zwd","zwl","zwn","zwr"],rn=nn,on=["AT","AU","BE","BR","CA","CH","DE","DK","EE","ES","FI","FR","GB","HK","IE","IT","JP","LT","LU","LV","MX","NL","NZ","NO","PH","PL","PT","RO","SE","SG","SK","US"],an=on,sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},un=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{check:function(e,n){var r=Jt(t,function(t){return void 0!==t.check(e,n)});return r?r.check(e,n):void 0},description:"one of the following types: "+t.map(function(e){return e.description}).join(", ")}},ln=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{check:function(e){return Jt(t,function(t){return t===e})},description:"one of the following strings: "+t.join(", ")}},pn={check:function(e){return Jt(rn,function(t){return t===e})},description:"a lowercase 3-letter ISO code. See https://stripe.com/docs/currencies for supported currencies"},fn={check:function(e){return Jt(an,function(t){return t===e})},description:"an uppercase 2-letter ISO code. See https://stripe.com/global for supported countries"},dn=function(e){return cn({},e,{required:!0})},hn={check:function(e){return"string"==typeof e?e:void 0},description:"a string"},yn=function(e){return cn({},hn,{required:!0,check:function(t){var n=hn.check(t);return void 0===n?e():n}})},mn={check:function(e){return"boolean"==typeof e?e:void 0},description:"true or false"},_n={check:function(e){return"number"==typeof e&&e===parseInt(e,10)?e:void 0},description:"an amount in the currency's subunit"},vn={check:function(e){return e&&"object"===(void 0===e?"undefined":sn(e))?e:void 0},description:"an object"},bn=function(e){return{check:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t,n){if(Array.isArray(t)){var r=t.reduce(function(t,r){var o=e.check(r,n);return void 0===o?t:[].concat(j(t),[o])},[]);if(r.length===t.length)return r}}),description:"an array of "+e.description}},gn=function(e){return{check:function(e){return void 0===e||void 0},description:"used in "+e+" instead"}},wn=function(e){return{check:function(t,n){var r=n.path||[],o=n.label||"";if(t&&"object"===(void 0===t?"undefined":sn(t))){var i=t;return Wt(Qt(e,function(e,t){if(e&&(i.hasOwnProperty(t)||e.required)){var n=i[t],a=e.check(n,{label:o,path:[].concat(j(r),[t])});if(void 0===a)throw new ae(e.required?"Missing required "+o+" parameter: "+[].concat(j(r),[t]).join(".")+" should be "+e.description+".":"Invalid "+o+" option: "+[].concat(j(r),[t]).join(".")+" should be "+e.description+".");return a}}),function(e,t){return void 0!==t})}},description:"an object"}},En={locale:hn,fonts:bn(vn)},On=wn(En),kn=function(e,t){if(!(e&&e in Et))throw new ae("A valid component name must be provided. Valid component names are:\n"+Object.keys(Et).filter(function(e){return!Et[e].beta}).join(", ")+"; you passed: "+e+".");if(Et[e].unique&&-1!==t.indexOf(e))throw new ae("Can only create one Element of type "+e+".");var n=tn(t,Et[e].conflict);if(n.length){var r=n[0];throw new ae("Cannot create an Element of type "+e+" after an element of type "+r+" has already been created.")}},Sn=function(){if(!window.PaymentRequest)return null;if(/CriOS\/59/.test(navigator.userAgent))return null;if(/.*\(.*; wv\).*Chrome\/(?:53|54)\.\d.*/g.test(navigator.userAgent))return null;var e=window.PaymentRequest;return _t&&!e.prototype.canMakePayment?e.prototype.canMakePayment=function(){return Ne.resolve(!0)}:e.prototype.canMakePayment||(e.prototype.canMakePayment=function(){return Ne.resolve(!1)}),e}(),Pn={CAN_MAKE_PAYMENT:"CAN_MAKE_PAYMENT"},Cn=function(){try{return window.location.origin===window.top.location.origin}catch(e){return!1}},An=function(e){var t={};return function(n){if(void 0!==t[n])return t[n];var r=e(n);return t[n]=r,r}}(function(e){return window.ApplePaySession.canMakePaymentsWithActiveCard(e)}),Tn=2,jn=function(e,t,n){if(window.ApplePaySession){if(Cn()){if(n&&"https:"!==window.location.protocol)return window.console&&window.console.warn("To test Apple Pay, you must serve this page over HTTPS."),Ne.resolve(!1);if(window.ApplePaySession.supportsVersion(Tn)){var r=t?[e,t]:[e],o="merchant."+r.join(".")+".stripe";return An(o).then(function(r){if(n&&!r&&window.console){var o=t?"or stripeAccount parameter ("+t+") ":"";window.console.warn("Either you do not have a card saved to your Wallet or the current domain ("+e+") "+o+"is not registered for Apple Pay. Visit https://dashboard.stripe.com/account/apple_pay to register this domain.")}return r})}return n&&window.console&&window.console.warn("This version of Safari does not support ApplePay JS version 2."),Ne.resolve(!1)}return Ne.resolve(!1)}return Ne.resolve(!1)},Rn=null,In=function(e,t){return null!==Rn?Ne.resolve(Rn):Sn?_t?Ne.resolve(!1):t&&"https:"!==window.location.protocol?(window.console&&window.console.warn("To test Payment Request, you must serve this page over HTTPS."),Ne.resolve(!1)):e?e.action(Pn.CAN_MAKE_PAYMENT).then(function(e){var t=e.available;return Rn="boolean"==typeof t&&t}):Ne.resolve(!1):Ne.resolve(!1)},Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qn={merchantCapabilities:["supports3DS"],displayItems:[]},Nn={amount:dn(_n),label:dn(hn),pending:mn},Ln=Mn({},Nn,{id:yn(function(){return Ce("shippingOption")}),pending:mn,selected:mn,detail:yn(function(){return""})}),xn={displayItems:bn(wn(Nn)),shippingOptions:function(e,t){return function(n){return{check:function(r,o){if(Array.isArray(r)){var i=r.reduce(function(t,n){return"object"===(void 0===n?"undefined":sn(n))&&n&&"string"==typeof n[e]?[].concat(j(t),[n[e]]):t},[]),a={};return i.forEach(function(n){if(a[n])throw new ae("Duplicate "+e+": "+n+". The property '"+e+"' of '"+t+"' has to be unique.");a[n]=!0}),n.check(r,o)}},description:e+" has to be unique"}}}("id","shippingOption")(bn(wn(Ln))),total:wn(Nn)},Fn={shipping:"shipping",delivery:"delivery",pickup:"pickup"},Un={requestShipping:mn,requestPayerName:mn,requestPayerEmail:mn,requestPayerPhone:mn,shippingType:ln.apply(void 0,R(Object.keys(Fn)))},Dn=Mn({},xn,Un,{currency:dn(pn),country:dn(fn),total:dn(wn(Nn))}),Hn={success:"success",fail:"fail",invalid_payer_name:"invalid_payer_name",invalid_payer_email:"invalid_payer_email",invalid_payer_phone:"invalid_payer_phone",invalid_shipping_address:"invalid_shipping_address"},zn=Mn({},xn,{status:dn(ln.apply(void 0,R(Object.keys(Hn))))}),Bn=wn(zn),Kn=wn(Dn),Vn=["mastercard","visa"],Yn=["AT","AU","CA","CH","DE","ES","FI","FR","GB","IT","JP","NL","SE","SG","US"],Gn=function(e){return"US"===e?["amex","discover","diners","jcb"].concat(Vn):-1!==Yn.indexOf(e)?["amex"].concat(Vn):Vn},Jn=function(e){return Gn(e).reduce(function(e,t){return"mastercard"===t?[].concat(I(e),["masterCard"]):"diners"===t?e:[].concat(I(e),[t])},[])},Zn={bif:1,clp:1,djf:1,gnf:1,jpy:1,kmf:1,krw:1,mga:1,pyg:1,rwf:1,vnd:1,vuv:1,xaf:1,xof:1,xpf:1},Qn=function(e,t){var n=Zn[t.toLowerCase()]||100,r=e/n,o=Math.log(n)/Math.log(10);return r.toFixed(Math.round(o))},Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$n=function(e,t){return{amount:Qn(e.amount,t.currency),label:e.label,type:e.pending?"pending":"final"}},Xn=function(e,t){return{amount:Qn(e.amount,t.currency),label:e.label,detail:e.detail,identifier:e.id}},er=function(e){return function(t){return t[e]&&"string"==typeof t[e]?t[e].toUpperCase():null}},tr=(re={},M(re,Hn.success,0),M(re,Hn.fail,1),M(re,Hn.invalid_payer_name,2),M(re,Hn.invalid_shipping_address,3),M(re,Hn.invalid_payer_phone,4),M(re,Hn.invalid_payer_email,4),re),nr=(oe={},M(oe,Fn.pickup,"storePickup"),M(oe,Fn.shipping,"shipping"),M(oe,Fn.delivery,"delivery"),oe),rr={total:function(e){return $n(e.total,e)},lineItems:function(e){return e.displayItems?e.displayItems.map(function(t){return $n(t,e)}):[]},shippingMethods:function(e){return e.shippingOptions?e.shippingOptions.map(function(t){return Xn(t,e)}):[]}},or=Wn({},rr,{shippingType:function(e){var t=e.shippingType;if(!t)return null;var n=nr[t];if(void 0!==n)return n;throw new ae("Invalid value for shippingType: "+t)},requiredBillingContactFields:function(e){return e.requestPayerName?["postalAddress"]:null},requiredShippingContactFields:function(e){var t=[];return e.requestShipping&&t.push("postalAddress"),e.requestPayerEmail&&t.push("email"),e.requestPayerPhone&&t.push("phone"),t.length?t:null},countryCode:er("country"),currencyCode:er("currency"),merchantCapabilities:function(e){return function(t){return t[e]||null}}("merchantCapabilities"),supportedNetworks:function(e){return Jn(e.country)}}),ir=Wn({},rr,{status:function(e){return tr[e.status]||0}}),ar=(Wn({},ir,or),function(e){var t={},n=Wn({},qn,e);return Object.keys(or).forEach(function(e){var r=or[e],o=r(n);null!==o&&(t[e]=o)}),t}),sr=function(e){var t={};return Object.keys(ir).forEach(function(n){var r=ir[n],o=r(e);null!==o&&(t[n]=o)}),t},cr=ar,ur=function(e){return"string"==typeof e?e:null},lr=function(e){return e?ur(e.phoneNumber):null},pr=function(e){return e?ur(e.emailAddress):null},fr=function(e){return e?[e.givenName,e.familyName].filter(function(e){return e&&"string"==typeof e}).join(" "):null},dr=function(e){if(e){var t=e.addressLines,n=e.countryCode,r=e.postalCode,o=e.administrativeArea,i=e.locality,a=e.phoneNumber,s=ur(n);return{addressLine:Array.isArray(t)?t.reduce(function(e,t){return"string"==typeof t?[].concat(q(e),[t]):e},[]):[],country:s?s.toUpperCase():"",postalCode:ur(r)||"",recipient:fr(e)||"",region:ur(o)||"",city:ur(i)||"",phone:ur(a)||"",sortingCode:"",dependentLocality:"",organization:""}}return null},hr=function(e,t){if(e&&t.shippingOptions){var n=e.identifier,r=e.label;return t.shippingOptions.filter(function(e){return e.id===n&&e.label===r})[0]||null}return null},yr=function(e,t){var n=e.shippingContact,r=e.shippingMethod,o=e.billingContact;return{shippingOption:hr(r,t),shippingAddress:dr(n),payerEmail:pr(n),payerPhone:lr(n),payerName:fr(o),methodName:"apple-pay"}},mr=yr,_r=function(e){if(!e||!e.length)throw new ae("When requesting shipping information, you must specify shippingOptions once a shipping address is selected.\nEither provide shippingOptions in stripe.paymentRequest(...) or listen for the shippingaddresschange event and provide shippingOptions to the updateWith callback there.")},vr=_r,br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Er={australia:"AU",austria:"AT",canada:"CA",schweiz:"CH",deutschland:"DE",hongkong:"HK",saudiarabia:"SA",espaa:"ES",singapore:"SG",us:"US",usa:"US",unitedstatesofamerica:"US",unitedstates:"US",england:"GB",gb:"GB",uk:"GB",unitedkingdom:"GB"},Or=function(e){function t(e,n,r){L(this,t);var o=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o.show=function(){if(!o._canMakePaymentCalled)throw new ae("You must first check the Payment Request API's\navailability using paymentRequest.canMakePayment() before calling show().");if(!o._cachedCanMakePayment)throw new ae("Payment Request is not available in this browser.");o._initializeSessionState();var e=new window.ApplePaySession(Tn,cr(o._paymentRequest));o._privateSession=e,o._setupSession(e),e.begin(),o._controller.report("apple_pay_session.show")},o.canMakePayment=function(){return null===o._cachedCanMakePayment?jn(window.location.hostname,o._authentication.stripeAccount,0===o._authentication.apiKey.indexOf("pk_test_")).then(function(e){return o._canMakePaymentCalled=!0,o._cachedCanMakePayment=e,o._cachedCanMakePayment?{applePay:!0}:null}):Ne.resolve().then(function(){return o._canMakePaymentCalled=!0,o._cachedCanMakePayment?{applePay:!0}:null})},o._validateMerchant=function(e){return function(t){o._controller.action(he.CREATE_APPLE_PAY_SESSION,{data:{validation_url:t.validationURL,domain_name:window.location.hostname,display_name:o._paymentRequest.total.label}}).then(function(t){var n=t.session,r=t.error;n?e.completeMerchantValidation(JSON.parse(n.session)):o._handleValidationError(e)(r)},o._handleValidationError(e))}},o._handleValidationError=function(e){return function(t){var n=t.message;e.abort(),"string"==typeof n?(o._controller.warn(t.message),o._controller.report("apple_pay_session.error",{error:t})):o._controller.report("apple_pay_session.unexpected_error",{error:t})}},o._paymentAuthorized=function(e){return function(t){var n=t.payment;o._controller.report("apple_pay_session.paymentauthorized"),o._controller.action(he.TOKENIZE,gr({},n,{billingContact:o._normalizeContact(n.billingContact),type:"apple_pay"})).then(function(t){var r=t.token,i=t.error;if(i)e.completePayment(window.ApplePaySession.STATUS_FAILURE),o._controller.report("apple_pay_session.error",{error:i});else{var a=o._normalizeContact(n.shippingContact),s=o._normalizeContact(n.billingContact);a&&o._paymentRequest.requestShipping&&!a.countryCode&&e.completePayment(window.ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS);var c=mr({shippingContact:a,billingContact:s},o._paymentRequest);o._onToken(e)(gr({},c,{shippingOption:o._privateShippingOption,token:r}))}})}},o._normalizeContact=function(e){if(e&&"object"===(void 0===e?"undefined":br(e))&&e.country&&"string"==typeof e.country){var t=e.country.toLowerCase().replace(/[^a-z]+/g,""),n=void 0;return e.countryCode?"string"==typeof e.countryCode&&(n=e.countryCode.toUpperCase()):(n=Er[t])||o._controller.report("apple_pay_session.missing_country_code",{country:e.country}),gr({},e,{countryCode:n})}return"object"===(void 0===e?"undefined":br(e))?e:null},o._onToken=function(e){return function(t){if(o.hasRegisteredListener("token")&&o.emit("token",gr({},t,{complete:o._completePayment(e)})),o.hasRegisteredListener("source")){var n=t.token,r=N(t,["token"]);o._controller.action(he.CREATE_SOURCE,{data:{type:"card",token:n.id}}).then(function(t){var i=t.source,a=t.error;a?(o._controller.report("apple_pay_session.source_failed",{error:a,token:n}),e.completePayment(window.ApplePaySession.STATUS_FAILURE)):o.emit("source",gr({},r,{source:i,complete:o._completePayment(e)}))})}}},o._completePayment=function(e){return function(t){o._paymentRequest=en(o._paymentRequest,ue(Bn,{status:t},{label:"status for PaymentRequest completion"}));var n=sr(o._paymentRequest),r=n.status;e.completePayment(r)}},o._shippingContactSelected=function(e){return function(t){var n=mr({shippingContact:o._normalizeContact(t.shippingContact)},o._paymentRequest).shippingAddress;if(o.hasRegisteredListener("shippingaddresschange")){var r={shippingAddress:n,updateWith:o._completeShippingContactSelection(e)};o.emit("shippingaddresschange",r)}else{vr(o._paymentRequest.shippingOptions);var i=sr(o._paymentRequest),a=i.total,s=i.lineItems,c=i.shippingMethods;e.completeShippingContactSelection(window.ApplePaySession.STATUS_SUCCESS,c,a,s)}}},o._completeShippingContactSelection=function(e){return function(t){o._paymentRequest=en(o._paymentRequest,ue(Bn,t||{},{label:"shipping address selection callback"})),o._paymentRequest.status===Hn.success&&vr(o._paymentRequest.shippingOptions);var n=sr(o._paymentRequest),r=n.status,i=n.shippingMethods,a=n.total,s=n.lineItems;e.completeShippingContactSelection(r,i,a,s)}},o._shippingMethodSelected=function(e){return function(t){if(o._privateShippingOption=mr({shippingMethod:t.shippingMethod},o._paymentRequest).shippingOption,o.hasRegisteredListener("shippingoptionchange")){var n={shippingOption:o._privateShippingOption,updateWith:o._completeShippingMethodSelection(e)};o.emit("shippingoptionchange",n)}else{var r=sr(o._paymentRequest),i=r.total,a=r.lineItems;e.completeShippingMethodSelection(window.ApplePaySession.STATUS_SUCCESS,i,a)}}},o._completeShippingMethodSelection=function(e){return function(t){o._paymentRequest=en(o._paymentRequest,ue(Bn,t||{},{label:"shipping option selection callback"}));var n=sr(o._paymentRequest),r=n.status,i=n.total,a=n.lineItems;e.completeShippingMethodSelection(r,i,a)}},o._authentication=n,o._controller=e,o._controller.report("apple_pay_session.options",{options:r});var i=ue(Kn,r||{},{label:"paymentRequest()"});return o._cachedCanMakePayment=null,o._canMakePaymentCalled=!1,o._initialPaymentRequest=i,o._initializeSessionState(),o}return F(t,e),wr(t,[{key:"abort",value:function(){this._privateSession&&(this._privateSession.abort(),this._controller.report("apple_pay_session.abort"))}},{key:"_initializeSessionState",value:function(){this._paymentRequest=gr({},this._initialPaymentRequest,{status:Hn.success}),this._privateSession=null,this._privateShippingOption=null,this._paymentRequest.shippingOptions&&(this._privateShippingOption=this._paymentRequest.shippingOptions[0])}},{key:"_setupSession",value:function(e){var t=this;e.addEventListener("validatemerchant",this._validateMerchant(e)),e.addEventListener("paymentauthorized",this._paymentAuthorized(e)),e.addEventListener("cancel",function(){t.emit("cancel")}),e.addEventListener("shippingcontactselected",this._shippingContactSelected(e)),e.addEventListener("shippingmethodselected",this._shippingMethodSelected(e))}}]),t}(Ge),kr=Or,Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cr=function(e){function t(e,n,r){D(this,t);var o=H(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));o.show=function(){if(!o._canMakePaymentCalled)throw new ae("You must first check the Payment Request API's\navailability using paymentRequest.canMakePayment() before calling show().");if(!o._cachedCanMakePayment||!o._prFrame)throw new ae("Payment Request is not available in this browser.");o._prFrame.send({action:"stripe-pr-show",payload:{}}),o._controller.report("payment_request.show")},o.canMakePayment=function(){return null===o._cachedCanMakePayment?In(o._prFrame,0===o._authentication.apiKey.indexOf("pk_test_")).then(function(e){return o._canMakePaymentCalled=!0,o._cachedCanMakePayment=e,o._cachedCanMakePayment?{applePay:!1}:null}):Ne.resolve().then(function(){return o._canMakePaymentCalled=!0,o._cachedCanMakePayment?{applePay:!1}:null})},o._handleToken=function(e,t,n){if(o.hasRegisteredListener("token")&&o.emit("token",Sr({},t,{complete:n})),o.hasRegisteredListener("source")){var r=t.token,i=U(t,["token"]),a=i.payerPhone,s=i.payerEmail;o._controller.action(he.CREATE_SOURCE,{data:{type:"card",token:r.id,owner:{phone:a,email:s}}}).then(function(e){var t=e.source,a=e.error;a?(o._controller.report("payment_request.source_failed",{error:a,token:r}),n(Hn.fail)):o.emit("source",Sr({},i,{source:t,complete:n}))})}},o._authentication=n,o._controller=e,o._controller.report("payment_request.options",{options:r}),o._cachedCanMakePayment=null,o._canMakePaymentCalled=!1;var i=ue(Kn,r||{},{label:"paymentRequest()"});if(Sn&&"https:"===window.location.protocol){o._controller.action(he.FETCH_LOCALE,{locale:"auto"});var a=o._controller.createHiddenFrame(me.PAYMENT_REQUEST,{authentication:n});o._setupPrFrame(a,i),o._prFrame=a}else o._prFrame=null;return o}return z(t,e),Pr(t,[{key:"abort",value:function(){this._prFrame&&(this._prFrame.send({action:"stripe-pr-abort",payload:{}}),this._controller.report("payment_request.abort"))}},{key:"_setupPrFrame",value:function(e,t){var n=this;e.send({action:"stripe-pr-initialize",payload:{data:t}}),e.on("pr-cancel",function(){n.emit("cancel")}),e.on("pr-error",function(e){n._controller.report("payment_request.error",{error:"Would have emitted 'error' event, but 'error' is silenced."})}),e.on("pr-callback",function(r){var o=r.event,i=r.nonce,a=r.options;if("token"===o){var s=function(t){var n=ue(Bn,{status:t},{label:"status for PaymentRequest completion"});e.send({action:"stripe-pr-callback-complete",payload:{data:n,nonce:i}})};n._handleToken(e,a,s)}else if("shippingaddresschange"===o||"shippingoptionchange"===o)if(n.hasRegisteredListener(o)){var c=a.shippingAddress,u=a.shippingOption,l="shippingaddresschange"===o?{shippingAddress:c}:{shippingOption:u};n.emit(o,Sr({},l,{updateWith:function(n){var r=ue(Bn,n||{},{label:o+" callback"});"shippingaddresschange"===o&&r.status===Hn.success&&vr(r.shippingOptions||t.shippingOptions),e.send({action:"stripe-pr-callback-complete",payload:{nonce:i,data:r}})}}))}else"shippingaddresschange"===o&&vr(t.shippingOptions),e.send({action:"stripe-pr-callback-complete",payload:{nonce:i,data:{status:Hn.success}}});else n._controller.report("payment_request.unknown_event",{event:o,options:a})})}}]),t}(Ge),Ar=Cr,Tr=window.ApplePaySession?kr:Ar,jr=Tr,Rr={check:function(e){return e instanceof jr?e:void 0},description:"a stripe.paymentRequest(...) object"},Ir={classes:wn({base:hn,complete:hn,empty:hn,focus:hn,invalid:hn,webkitAutofill:hn}),hidePostalCode:mn,hideIcon:mn,style:wn({base:vn,complete:vn,empty:vn,invalid:vn,paymentRequestButton:vn}),iconStyle:ln("solid","default"),value:un(hn,vn),__privateCvcOptional:mn,__privateValue:un(hn,vn),error:wn({type:hn,code:hn,decline_code:hn}),locale:gn("elements()"),fonts:gn("elements()"),placeholder:hn,paymentRequest:Rr},Mr=wn(Ir),qr=function(e,t){var n=Array.prototype.slice.call(document.querySelectorAll("a[href], area[href], input:not([disabled]),\n  select:not([disabled]), textarea:not([disabled]), button:not([disabled]),\n  object, embed, *[tabindex], *[contenteditable]")),r=[];n.forEach(function(e){var t=e.getAttribute("tabindex"),n=!t||parseInt(t,10)>=0,o=e.getBoundingClientRect(),i=o.width>0&&o.height>0;n&&i&&r.push(e)});var o=Zt(r,function(t){return t===e||e.contains(t)});return r[o+("previous"===t?-1:1)]},Nr=qr,Lr="14px",xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.2em",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;if(/^[0-9.]+px$/.test(e))return e;var n=parseFloat(e.toString().replace(/[^0-9.]/g,"")),r=parseFloat(Lr.replace(/[^0-9.]/g,"")),o=parseFloat(t.toString().replace(/[^0-9.]/g,"")),i=void 0;if(/^(\d+|\d*\.\d+)px$/.test(t))i=o;else if(/^(\d+|\d*\.\d+)em$/.test(t))i=o*r;else if(/^(\d+|\d*\.\d+)%$/.test(t))i=o/100*r;else{if(!/^[\d.]+$/.test(t)&&!/^\d*\.(px|em|%)$/.test(t))return"100%";i=r}var a=n*i+"px";return/^[0-9.]+px$/.test(a)?a:"100%"},Fr=xr,Ur=function(e,t){return e?window.getComputedStyle(e,t):null},Dr=Ur,Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Br={base:"StripeElement",focus:"StripeElement--focus",invalid:"StripeElement--invalid",complete:"StripeElement--complete",empty:"StripeElement--empty",webkitAutofill:"StripeElement--webkit-autofill"},Kr={margin:"0",padding:"0",border:"none",display:"block",background:"transparent",position:"relative",opacity:"1"},Vr={border:"none",display:"block",position:"absolute",height:"1px",top:"0",left:"0",padding:"0",margin:"0",width:"100%",opacity:"0",background:"transparent",pointerEvents:"none"},Yr=function(e){return parseFloat(e.toFixed(1))},Gr=function(e){function t(e){K(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.focus=function(e){return n._checkDestroyed(),e&&e.preventDefault(),n._fakeInput.focus(),n},n.blur=function(){return n._checkDestroyed(),n._frame.blur(),n._fakeInput.blur(),n},n._formSubmit=function(){for(var e=n._component.parentElement;e&&"FORM"!==e.nodeName;)e=e.parentElement;if(e){var t=document.createEvent("Event");t.initEvent("submit",!0,!0),e.dispatchEvent(t)}};var r=e.controller,o=e.componentName,i=e.paymentRequest;n._controller=r,n._componentName=o;var a="paymentRequestButton"===n._componentName;if(a){if(!i)throw new ae("You must pass in a stripe.paymentRequest object in order to use this Element.");n._paymentRequest=i}return n._createComponent(e,o),n._classes=Hr({},Br),n._changeClasses(e.classes),n._lastBackgroundColor="",n._destroyed=!1,n._focused=!1,n._empty=!a,n._invalid=!1,n._complete=!1,n._autofilled=!1,n.on("submit",n._formSubmit),n}return Y(t,e),zr(t,[{key:"mount",value:function(e){this._checkDestroyed();var t=void 0;if(!e)throw new ae("Missing argument. Make sure to call mount() with a valid DOM element or selector.");if("string"==typeof e){var n=document.querySelectorAll(e);if(n.length>1&&this._controller.warn("The selector you specified ("+e+") applies to "+n.length+" DOM elements that are currently on the page.\nThe Stripe Element will be mounted to the first one."),!n.length)throw new ae("The selector you specified ("+e+") applies to no DOM elements that are currently on the page.\nMake sure the element exists on the page before calling mount().");t=n[0]}else{if(!e.appendChild)throw new ae("Invalid DOM element. Make sure to call mount() with a valid DOM element or selector.");t=e}if("INPUT"===t.nodeName)throw new ae("Stripe Elements must be mounted in a DOM element that\ncan contain child nodes. `input` elements are not permitted to have child\nnodes. Try using a `div` element instead.");if(t.children.length&&this._controller.warn("This Element will be mounted to a DOM element that contains child nodes."),this._paymentRequest){if(!this._paymentRequest._canMakePaymentCalled)throw new ae("For paymentRequest Elements, you must first check the Payment Request API's\navailability using paymentRequest.canMakePayment() before mounting the Element.");if(!this._paymentRequest._cachedCanMakePayment)throw new ae("The "+this._componentName+" Element is not available in the current environment.");this._mountToParent(t)}else this._mountToParent(t)}},{key:"_mountToParent",value:function(e){var t=this._component.parentElement,n=this._isMounted();if(e===t){if(n)return;this.unmount(),this._mountTo(e)}else if(t){if(n)throw new ae("This Element is already mounted. Use `unmount()` to unmount the Element before re-mounting.");this.unmount(),this._mountTo(e)}else this._mountTo(e)}},{key:"update",value:function(e){this._checkDestroyed();var t=ue(Mr,e,{label:"update()"})||{};if(t){var n=t.classes,r=B(t,["classes"]);this._changeClasses(n),this._updateFrameHeight(t),Object.keys(r).length&&this._frame.update(r)}return this}},{key:"clear",value:function(){return this._checkDestroyed(),this._frame.clear(),this}},{key:"unmount",value:function(){this._checkDestroyed();var e=this._component.parentElement,t=this._label;return e&&(e.removeChild(this._component),e.removeEventListener("click",this.focus),this._removeClasses()),this._parent=null,t&&(t.removeEventListener("click",this.focus),this._label=null),this._fakeInput.disabled=!0,this._frame.unmount(),this}},{key:"destroy",value:function(){return this._checkDestroyed(),this.unmount(),this._destroyed=!0,this.emit("destroy"),this}},{key:"_checkDestroyed",value:function(){if(this._destroyed)throw new ae("This Element has already been destroyed. Please create a new one.")}},{key:"_isMounted",value:function(){return!!document.body&&document.body.contains(this._component)}},{key:"_mountTo",value:function(e){var t=Date.now(),n=Dr(e,null),r=!!n&&"rtl"===n.getPropertyValue("direction");for(this._parent=e;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(this._component),this._frame.send({action:"stripe-user-mount",payload:{mountTime:t,rtl:r}}),this._findPossibleLabel(),this._updateClasses()}},{key:"_updateClasses",value:function(){this._parent&&Ue(this._parent,[[this._classes.base,!0],[this._classes.empty,this._empty],[this._classes.focus,this._focused],[this._classes.invalid,this._invalid],[this._classes.complete,this._complete],[this._classes.webkitAutofill,this._autofilled]])}},{key:"_removeClasses",value:function(){this._parent&&Ue(this._parent,[[this._classes.base,!1],[this._classes.empty,!1],[this._classes.focus,!1],[this._classes.invalid,!1],[this._classes.complete,!1],[this._classes.webkitAutofill,!1]])}},{key:"_findPossibleLabel",value:function(){var e=this._parent;if(e){var t=e.getAttribute("id"),n=void 0;if(t&&(n=document.querySelector("label[for="+t+"]")),n)e.addEventListener("click",this.focus);else for(n=n||e.parentElement;n&&"LABEL"!==n.nodeName;)n=n.parentElement;n?(this._label=n,n.addEventListener("click",this.focus)):e.addEventListener("click",this.focus)}}},{key:"_changeClasses",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach(function(n){if(!Br[n])throw new ae(n+" is not a customizable class name.\nYou can customize: "+Object.keys(Br).join(", "));t[n]=e[n].replace(/\./g," ")}),this._classes=Hr({},this._classes,t),this}},{key:"_setupEvents",value:function(){var e=this;this._frame.on("redirectfocus",function(t){var n=t.focusDirection,r=Nr(e._component,n);r&&r.focus()}),this._frame.on("focus",function(){e._focused=!0,e._updateClasses()}),this._frame.on("blur",function(){e._focused=!1,e._updateClasses()}),this._frame.on("submit",function(){if("paymentRequestButton"===e._componentName){var t=!1,n=!1;e.emit("click",{preventDefault:function(){e._controller.report("payment_request_button.default_prevented"),t&&e._controller.warn("event.preventDefault() was called after the payment sheet was shown. Make sure to call it synchronously when handling the `click` event."),n=!0}}),!n&&e._paymentRequest&&(e._paymentRequest.show(),t=!0)}else e.emit("submit")}),["ready","focus","blur","escape"].forEach(function(t){e._frame.on(t,function(){e.emit(t)})}),this._frame.on("change",function(t){var n=t.error,r=t.brand,o=t.value,i=t.empty,a=t.complete;e.emit("change",{error:n,brand:r,value:o,empty:i,complete:a}),e._empty=i,e._invalid=!!n,e._complete=a,e._updateClasses()}),this._frame.on("__privateIntegrationError",function(t){var n=t.message;e.emit("__privateIntegrationError",{message:n})}),this._frame.on("dimensions",function(t){if(e._parent){var n=Dr(e._parent,null);if(n){var r=parseFloat(n.getPropertyValue("height")),o=t.height;if("border-box"===n.getPropertyValue("box-sizing")){var i=parseFloat(n.getPropertyValue("padding-top")),a=parseFloat(n.getPropertyValue("padding-bottom"));r=r-parseFloat(n.getPropertyValue("border-top"))-parseFloat(n.getPropertyValue("border-bottom"))-i-a}0!==r&&Yr(r)<Yr(o)&&e._controller.report("wrapper_height_mismatch",{height:o,outer_height:r});var s=e._component.getBoundingClientRect().height;0!==s&&0!==o&&Yr(s)!==Yr(o)&&(e._frame.updateStyle({height:o+"px"}),e._controller.report("iframe_height_update",{height:o,calculated_height:s}))}}}),this._frame.on("autofill",function(){if(e._parent){var t=e._parent.style.backgroundColor,n="#faffbd"===t||"rgb(250, 255, 189)"===t;e._lastBackgroundColor=n?e._lastBackgroundColor:t,e._parent.style.backgroundColor="#faffbd",e._autofilled=!0,e._updateClasses()}}),this._frame.on("autofill-cleared",function(){e._autofilled=!1,e._parent&&(e._parent.style.backgroundColor=e._lastBackgroundColor),e._updateClasses()})}},{key:"_createComponent",value:function(e,t){this._createElement(e,t),this._setupEvents(),this._updateFrameHeight(e,!0)}},{key:"_updateFrameHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("paymentRequestButton"===this._componentName){var n=e.style&&e.style.paymentRequestButton||{},r=n.height,o="string"==typeof r?r:void 0;(t||o)&&(this._frame.updateStyle({height:o||this._lastHeight||"40px"}),this._lastHeight=o||this._lastHeight)}else{var i=e.style&&e.style.base||{},a=i.lineHeight,s=i.fontSize,c="string"==typeof a?a:void 0,u="string"==typeof s?s:void 0;if(t||c||u){var l=Fr(c||this._lastHeight,u||this._lastFontSize);this._frame.updateStyle({height:l}),this._lastFontSize=u||this._lastFontSize,this._lastHeight=c||this._lastHeight}}}},{key:"_createElement",value:function(e,t){var n=(e.classes,e.controller,e.paymentRequest,B(e,["classes","controller","paymentRequest"])),r=document.createElement("div");r.className="__PrivateStripeElement";var o=document.createElement("input");o.className="__PrivateStripeElement-input",De(r,Kr),De(o,Vr),o.setAttribute("aria-hidden","true"),o.disabled=!0;var i=Dr(document.body),a=!!i&&"rtl"===i.getPropertyValue("direction"),s=kt[t],c=this._controller.createElementFrame(s,Hr({},n,{rtl:a}));c.on("load",function(){o.disabled=!1}),o.addEventListener("focus",function(){c.focus()}),c.appendTo(r),r.appendChild(o),this._component=r,this._frame=c,this._fakeInput=o}}]),t}(Ge),Jr=Gr,Zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qr=function e(t,n){var r=this;J(this,e),Wr.call(this);var o=ue(On,n||{},{label:"elements()"});this._elements=[],this._id=Ce("elements"),this._controller=t;var i=o.locale,a=o.fonts||[];this._controller.action(he.FETCH_LOCALE,{locale:i||"auto"});var s=a.filter(function(e){return!e.cssSrc||"string"!=typeof e.cssSrc}),c=a.map(function(e){return e.cssSrc}).reduce(function(e,t){return"string"==typeof t?[].concat(G(e),[t]):e},[]);return this._pendingFonts=c.length,this._commonOptions=Zr({},o,{fonts:s}),c.forEach(function(e){if("string"==typeof e){var t=Date.now();Vt(e).then(function(n){r._controller.report("font.loaded",{load_time:Date.now()-t,font_count:n.length,css_src:e}),r._controller.action(he.UPDATE_CSS_FONTS,{fonts:n.map(function(t){return Zr({},t,{__privateCssSrc:e})}),groupId:r._id})}).catch(function(n){throw r._controller.report("font.error",{load_time:Date.now()-t,message:n.message,css_src:e}),n})}}),this},Wr=function(){var e=this;this.create=function(t,n){kn(t,e._elements);var r=ue(Mr,n||{},{label:"create()"}),o=!!e._pendingFonts,i=new Jr(Zr({},r,e._commonOptions,{controller:e._controller,componentName:t,groupId:e._id,wait:o}));return e._elements=[].concat(G(e._elements),[t]),i.on("destroy",function(){e._elements=e._elements.filter(function(e){return e!==t})}),i}},$r=Qr,Xr=wn({apiKey:hn,stripeAccount:hn,__privateForcedFeatures:vn}),eo=function(e){return!/^pk_(test_|live_)/.test(e)},to=eo,no=function(e){var t=e.name,n=e.value,r=e.expiresIn,o=e.path,i=e.domain,a=new Date,s=r||31536e6;a.setTime(a.getTime()+s);var c=o||"/",u=(n||"").replace(/[^!#-+\--:<-[\]-~]/g,encodeURIComponent),l=encodeURIComponent(t)+"="+u+";expires="+a.toGMTString()+";path="+c;i&&(l+=";domain="+i),document.cookie=l},ro=function(e){var t=Jt(document.cookie.split("; "),function(t){var n=t.indexOf("=");return decodeURIComponent(t.substr(0,n))===e});if(t){var n=t.indexOf("=");return decodeURIComponent(t.substr(n+1))}return null},oo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),io="__privateStripeMetricsController",ao={MERCHANT:"merchant",SESSION:"session"},so=function(e){function t(){Z(this,t);var e=Q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._muid=e._getID(ao.MERCHANT),e._sid=e._getID(ao.SESSION),e._id=Ce(io),e._controllerFrame=new it(me.METRICS_CONTROLLER,e._id,{autoload:!0,queryString:e._buildFrameQueryString()}),e._establishMessageChannel(),e._startIntervalCheck(),setTimeout(e._testLatency.bind(e),2e3+500*Math.random()),e}return W(t,e),oo(t,[{key:"ids",value:function(){return{guid:this._guid,muid:this._muid,sid:this._sid}}},{key:"_establishMessageChannel",value:function(){var e=this;window.addEventListener("message",function(t){try{var n=JSON.parse(t.data),r=n.originatingScript,o=n.payload;"m"===r&&(e._guid=o)}catch(e){}})}},{key:"_startIntervalCheck",value:function(){var e=this,t=window.location.href;setInterval(function(){var n=window.location.href;n!==t&&(e._controllerFrame.send({action:"ping",payload:{sid:e._getID(ao.SESSION),muid:e._getID(ao.MERCHANT),title:document.title,referrer:document.referrer,url:document.location.href}}),t=n)},5e3)}},{key:"report",value:function(e,t){try{this._controllerFrame.send({action:"track",payload:{sid:this._getID(ao.SESSION),muid:this._getID(ao.MERCHANT),url:document.location.href,source:e,data:t}})}catch(e){}}},{key:"_testLatency",value:function(){var e=this,t=[],n=new Date,r=function r(){try{var o=new Date;t.push(o-n),t.length>=10&&(e.report("mouse-timings-10",t),document.removeEventListener("mousemove",r)),n=o}catch(e){}};document.addEventListener("mousemove",r)}},{key:"_buildFrameQueryString",value:function(){var e=document.location.href,t={url:e,title:document.title,referrer:document.referrer,muid:this._muid,sid:this._sid,preview:pt(e)};return Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e].toString())}).join("&")}},{key:"_getID",value:function(e){switch(e){case ao.MERCHANT:try{var t=ro("__stripe_mid")||Ae();return no({name:"__stripe_mid",value:t,domain:"."+document.location.hostname}),t}catch(e){return"NA"}case ao.SESSION:try{var n=ro("__stripe_sid")||Ae();return no({name:"__stripe_sid",value:n,domain:"."+document.location.hostname,expiresIn:18e5}),n}catch(e){return"NA"}default:throw new Error("Invalid ID type specified: "+e)}}}]),t}(Ge),co=so,uo=function(e){for(var t=0,n=0;n<e.length;n++){t=31*t+e.charCodeAt(n),t|=0}return t.toString()},lo=uo,po={noop:{likelihood:.3}},fo=function(e,t){return e+"-"+t},ho=function(e){try{window.localStorage.setItem("__stripe-js-v3-features__",JSON.stringify(e))}catch(e){}},yo=function(){var e={};try{e=JSON.parse(window.localStorage.getItem("__stripe-js-v3-features__"))||{}}catch(e){}return e},mo=function(e){var t=yo(),n={},r={};return Object.keys(po).forEach(function(o){if(po[o]){var i=po[o],a=i.likelihood,s=i.whitelist,c=fo(o,a);if(s&&-1===s.indexOf(lo(e)))n[o]=r[c]=!1;else{var u=t[c],l=Math.random()<a;n[o]=r[c]=void 0!==u?u:l}}}),ho(r),n},_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bo=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),go=function(){function e(t){X(this,e),wo.call(this);var n=ue(Xr,t||{},{label:"`stripe()`"}),r=n.apiKey,o=n.stripeAccount,i=n.__privateForcedFeatures;if(!r)throw new ae("Please specify a publishable key.");if(0===r.indexOf("sk_"))throw new ae("You should not use your secret key with Stripe.js.\n        Please pass a publishable key instead.");this._apiKey=r;var a=this._initFeatures(i);this._stripeAccount=o||null,this._controller=new jt({apiKey:r,stripeAccount:o,stripeJsId:e.stripeJsId,features:a}),this._ensureHTTPS(r)}return bo(e,[{key:"_redirect",value:function(e){window.location.href=e}},{key:"_ensureHTTPS",value:function(e){var t=window.location.protocol,n=-1!==["https:","file:"].indexOf(t),r=-1!==["localhost","127.0.0.1","0.0.0.0"].indexOf(window.location.hostname),o=0===e.indexOf("pk_live_"),i="Live Stripe.js integrations must use HTTPS.";if(!n){if(o&&!r)throw this._controller.report("non_https_error",{protocol:t}),new ae(i);!o||r?window.console&&console.warn("You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS."):window.console&&console.warn(i)}}},{key:"_initFeatures",value:function(e){var t=mo(this._apiKey),n=vo({},t);return e&&(Object.keys(e).forEach(function(e){po.hasOwnProperty(e)||console.error('Unrecognized feature "'+e+'" passed to "forcedFeatures".')}),Object.keys(t).forEach(function(t){void 0!==e[t]&&(n=vo({},n,$({},t,!!e[t])))})),n}}]),e}();go.version=3,go.stripeJsId=Ae();var wo=function(){var e=this;this.elements=function(t){return new $r(e._controller,t)},this.createToken=function(t,n){var r="string"==typeof t?t:void 0,o=t instanceof Jr?t._frame.id:void 0,i=n&&"object"===(void 0===n?"undefined":_o(n))?n:{},a=vo({type:r,frameId:o},i);return go._ec&&(a.mids=go._ec.ids()),e._controller.action(he.TOKENIZE,a)},this.createSource=function(t,n){var r=t instanceof Jr?t._frame.id:void 0,o=r?n:t;return!r&&o&&"object"!==(void 0===o?"undefined":_o(o))?Ne.reject(new ae("Please provide Source creation parameters to createSource.")):(go._ec&&o&&"object"===(void 0===o?"undefined":_o(o))&&(o.mids=go._ec.ids()),e._controller.action(he.CREATE_SOURCE,{frameId:r,data:o}))},this.retrieveSource=function(t){return e._controller.action(he.RETRIEVE_SOURCE,{source:t})},this.paymentRequest=function(t){if(to(e._apiKey))throw new ae("It looks like you're using an older Stripe key. In order to use this API, you'll need to use a modern API key, which is prefixed with 'pk_live_' or 'pk_test_'.\n        You can roll your publishable key here: https://dashboard.stripe.com/account/apikeys");return new jr(e._controller,{apiKey:e._apiKey,stripeAccount:e._stripeAccount},t)},this._authorizeSource=function(t){return e._controller.action(he.AUTHORIZE_SOURCE,{source:t}).then(function(t){var n=t.source,r=t.authorizationStatus;if("redirect"===t.nextAction){var o=n.redirect;return e._redirect(o.url),new Ne(function(t,n){setTimeout(function(){e._controller.report("redirect_error",{url:o.url}),n({error:new Error("Failed to perform a redirect.")})},1e4)})}return{source:n,authorizationStatus:r}})},this._getAuthorizationStatus=function(t){return e._controller.action(he.GET_AUTHORIZATION_STATUS,{source:t})}},Eo=function(e,t){return new go(vo({apiKey:e},t&&"object"===(void 0===t?"undefined":_o(t))?t:{}))};Eo.version=go.version,window.addEventListener("load",function(){go._ec=new co}),window.Stripe&&2===window.Stripe.version&&!window.Stripe.StripeV3?window.Stripe.StripeV3=Eo:window.Stripe?window.console&&console.warn("It looks like Stripe.js was loaded more than one time. Please only load it once per page."):window.Stripe=Eo;t.default=Eo},function(e,t,n){"use strict";function r(e){var t=new o(o._61);return t._81=1,t._65=e,t}var o=n(3);e.exports=o;var i=r(!0),a=r(!1),s=r(null),c=r(void 0),u=r(0),l=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return s;if(void 0===e)return c;if(!0===e)return i;if(!1===e)return a;if(0===e)return u;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(e){return new o(function(t,n){n(e)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._81;)s=s._65;return 1===s._81?r(a,s._65):(2===s._81&&n(s._65),void s.then(function(e){r(a,e)},n))}var c=s.then;if("function"==typeof c){return void new o(c.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0==--i&&e(t)}if(0===t.length)return e([]);for(var i=t.length,a=0;a<t.length;a++)r(a,t[a])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(e){return _=e,v}}function i(e,t){try{return e(t)}catch(e){return _=e,v}}function a(e,t,n){try{e(t,n)}catch(e){return _=e,v}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&y(e,this)}function c(e,t,n){return new e.constructor(function(o,i){var a=new s(r);a.then(o,i),u(e,new h(t,n,a))})}function u(e,t){for(;3===e._81;)e=e._65;if(s._10&&s._10(e),0===e._81)return 0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t);l(e,t)}function l(e,t){m(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?p(t.promise,e._65):f(t.promise,e._65));var r=i(n,e._65);r===v?f(t.promise,_):p(t.promise,r)})}function p(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=o(t);if(n===v)return f(e,_);if(n===e.then&&t instanceof s)return e._81=3,e._65=t,void d(e);if("function"==typeof n)return void y(n.bind(t),e)}e._81=1,e._65=t,d(e)}function f(e,t){e._81=2,e._65=t,s._97&&s._97(e,t),d(e)}function d(e){if(1===e._45&&(u(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)u(e,e._54[t]);e._54=null}}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function y(e,t){var n=!1,r=a(e,function(e){n||(n=!0,p(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==v||(n=!0,f(t,_))}var m=n(4),_=null,v={};e.exports=s,s._10=null,s._97=null,s._61=r,s.prototype.then=function(e,t){if(this.constructor!==s)return c(this,e,t);var n=new s(r);return u(this,new h(e,t,n)),n}},function(e,t,n){"use strict";(function(t){function n(e){a.length||(i(),s=!0),a[a.length]=e}function r(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>u){for(var t=0,n=a.length-c;t<n;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,s=!1}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var i,a=[],s=!1,c=0,u=1024,l=void 0!==t?t:self,p=l.MutationObserver||l.WebKitMutationObserver;i="function"==typeof p?function(e){var t=1,n=new p(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):o(r),n.requestFlush=i,n.makeRequestCallFromTimer=o}).call(t,n(5))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r,o;!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var n=t.length,r=0;r<n;++r)i(e,t[r])}function n(e,t){e[t]=!0}function r(e,t){for(var n in t)s.call(t,n)&&(e[n]=!!t[n])}function o(e,t){for(var n=t.split(c),r=n.length,o=0;o<r;++o)e[n[o]]=!0}function i(e,i){if(i){var a=typeof i;"string"===a?o(e,i):Array.isArray(i)?t(e,i):"object"===a?r(e,i):"number"===a&&n(e,i)}}function a(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=new e;t(i,r);var a=[];for(var s in i)i[s]&&a.push(s);return a.join(" ")}e.prototype=Object.create(null);var s={}.hasOwnProperty,c=/\s+/;return a}();void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()}]);